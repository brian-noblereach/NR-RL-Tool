/* =========================================================
   NobleReach Readiness Levels â€“ Global Styles (consolidated)
   ========================================================= */

/* ---------- Design tokens ---------- */
:root{
  --indigo-500:#6366f1; --indigo-600:#4f46e5; --violet-500:#8b5cf6;
  --slate-50:#f8fafc; --slate-100:#f1f5f9; --slate-200:#e2e8f0;
  --slate-300:#cbd5e1; --slate-400:#94a3b8; --slate-500:#64748b;
  --slate-600:#475569; --slate-700:#334155; --slate-900:#0f172a;
  --green-500:#22c55e; --green-600:#16a34a; --yellow-100:#fef9c3; --yellow-400:#facc15;
  --radius:12px;
  
  /* Brand colors */
  --brand-indigo:#5752D0;
  --brand-violet:#7C6AED;
  --brand-deep:#2E2A62;
}

/* ---------- Reset ---------- */
*{margin:0;padding:0;box-sizing:border-box}
html,body{height:100%}
body{
  font-family:"Inter", -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Helvetica Neue',Arial,sans-serif;
  background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
  color:#111827;
  padding:32px 20px 20px 20px; /* Added more top padding for breathing room */
  min-height:100vh;
}

/* ---------- Utilities ---------- */
.hidden{display:none !important}
.badge{
  display:inline-flex;align-items:center;gap:6px;
  padding:6px 10px;border:1px dashed var(--slate-300);border-radius:999px;
  background:#fff;font-size:12px;color:var(--slate-700)
}

/* ---------- Container & layout ---------- */
.container{
  max-width:1600px;
  margin:0 auto;
  background:#fff;
  border-radius:20px;
  box-shadow:0 20px 60px rgba(0,0,0,.25);
  overflow:visible; /* Allow sticky sidebar */
  position:relative;
  padding-top:1px; /* Prevent margin collapse */
}
.main-content{display:flex;min-height:600px;align-items:flex-start}

/* =========================================================
   Topbar / Toolbar
   ========================================================= */
.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:16px 20px;
  border-radius:16px;
  background:linear-gradient(135deg,var(--brand-indigo),var(--brand-violet));
  color:#fff;
  margin:20px 20px 12px; /* Increased top margin for better spacing */
}
.brand{display:flex;align-items:center;gap:10px}
.brand-title{font-size:18px;font-weight:800;letter-spacing:.2px}
.brand .tm{font-size:.7em;vertical-align:super;margin-left:2px}
.nr-logo{display:block;width:28px;height:28px}
.topbar-actions{display:flex;gap:8px}

.toolbar{
  display:grid;grid-template-columns:1.2fr auto auto auto;gap:14px;align-items:end;
  background:#fff;border:1px solid var(--slate-200);border-radius:var(--radius);
  padding:12px;margin:0 16px 12px
}

.venture-name{display:flex;flex-direction:column;gap:6px;min-width:260px}
.venture-name label{font-size:12px;color:var(--slate-500)}
.venture-name input{
  height:40px;padding:6px 10px;border:1px solid var(--slate-300);
  border-radius:8px;background:#fff;font-size:14px
}

.timestamp{
  display:inline-flex;align-items:center;gap:6px;padding:6px 10px;height:40px;
  border:1px dashed var(--slate-300);border-radius:8px;font-size:13px;color:var(--slate-900);
  background:#fff
}
.timestamp span{font-size:12px;color:var(--slate-500)}

.health-toggle.compact{display:flex;flex-direction:column;gap:4px}
.health-toggle.compact .health-label{
  display:inline-flex;align-items:center;gap:8px;font-weight:600;font-size:13px;color:var(--slate-900)
}
.health-toggle.compact input[type="checkbox"]{transform:scale(.85);accent-color:var(--indigo-500)}
.health-toggle.compact .help-text{font-size:11.5px;color:var(--slate-500)}
.info-banner{font-size:12px;padding:6px 10px;border-radius:8px;background:var(--slate-100);color:var(--slate-700)}

.view-toggle{display:flex;gap:8px}
.view-btn{
  padding:8px 12px;border:1px solid transparent;background:#fff;border-radius:8px;
  cursor:pointer;transition:background .15s ease,color .15s ease,transform .1s ease
}
.view-btn:hover{background:var(--slate-50)}
.view-btn.active{background:var(--brand-indigo);color:#fff}

/* Buttons (global) */
.btn{
  appearance:none;border:1px solid transparent;background:var(--indigo-500);color:#fff;
  padding:8px 14px;border-radius:10px;font-weight:600;cursor:pointer;
  transition:transform .12s ease,box-shadow .12s ease,background .12s ease;
  box-shadow:0 1px 2px rgba(2,6,23,.08)
}
.btn:hover{background:var(--indigo-600)}
.btn:active{transform:translateY(1px)}
.btn.small{padding:6px 12px;font-size:13px}

/* =========================================================
   Sidebar
   ========================================================= */
.sidebar{
  width:260px;
  background:var(--slate-50);
  padding:20px;
  border-right:1px solid var(--slate-200);
  position:sticky;
  top:20px;
  align-self:flex-start;
  max-height:calc(100vh - 40px);
  overflow-y:auto;
  z-index:5;
}
.sidebar h3{margin-bottom:12px;color:var(--slate-700)}
.category-list{list-style:none}
.category-item{
  padding:12px;margin-bottom:10px;background:#fff;border:1px solid var(--slate-200);
  border-radius:8px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;
  transition:transform .12s ease,border-color .12s ease,box-shadow .12s ease
}
.category-item:hover{transform:translateX(4px);border-color:var(--indigo-500)}
.category-item.active{border-color:var(--indigo-500);box-shadow:0 1px 8px rgba(99,102,241,.18)}
.category-score{
  background:var(--indigo-500);color:#fff;padding:2px 8px;border-radius:6px;font-weight:700;min-width:26px;text-align:center
}
.category-score.empty{background:var(--slate-300)}

/* =========================================================
   Assessment Area
   ========================================================= */
.assessment-area{flex:1;padding:24px 24px 32px;overflow-y:auto}
.progress-notice h2,#category-title{font-size:24px;color:var(--brand-deep);margin-bottom:8px}
.industry-selector{margin:8px 0 16px;padding:10px;background:#eef6ff;border:1px solid #dae8ff;border-radius:8px}
.industry-selector.hidden{display:none !important}
.industry-selector label{font-size:13px;margin-right:6px}
.industry-selector select{
  padding:6px 8px;border:1px solid var(--slate-300);border-radius:6px;background:#fff
}
.industry-selector .help-text{display:block;margin-top:6px;font-size:12px;color:var(--slate-400)}

/* ----- Level cards ----- */
.levels-container{display:flex;flex-direction:column;gap:14px}
.level-card{
  border:1px solid var(--slate-200);border-radius:10px;overflow:hidden;background:#fff;
  transition:border-color .15s ease,box-shadow .15s ease
}
.level-card.included{background:rgba(34,197,94,.06);border-color:rgba(34,197,94,.35)}
.level-card.selected{
  border-color:var(--brand-indigo);
  box-shadow:0 6px 18px rgba(87,82,208,.18);
}
.level-header{
  padding:14px 18px;background:var(--slate-50);display:flex;align-items:center;gap:12px;
  cursor:pointer;user-select:none
}
.level-card.included .level-header{background:rgba(34,197,94,.10)}
.level-card.selected .level-header{background:linear-gradient(135deg,rgba(99,102,241,.15),rgba(139,92,246,.15))}
.level-number{
  width:38px;height:38px;border-radius:50%;background:#fff;border:1px solid var(--slate-300);
  display:flex;align-items:center;justify-content:center;font-size:1.05rem;font-weight:700
}
.level-card.included .level-number{background:var(--green-500);color:#fff;border-color:var(--green-500)}
.level-card.selected .level-number{
  background:linear-gradient(135deg,var(--indigo-500),var(--violet-500));
  color:#fff;border-color:var(--indigo-500)
}
.level-title{flex:1;font-weight:700;color:var(--slate-700)}
.level-select-btn{
  padding:8px 12px;border:none;border-radius:8px;background:var(--indigo-500);color:#fff;
  cursor:pointer;transition:transform .1s ease,background .15s ease
}
.level-select-btn:hover{background:var(--indigo-600);transform:scale(1.02)}
.level-select-btn.selected{background:var(--green-600)}
.expand-icon{transition:transform .2s ease}
.level-card.expanded .expand-icon{transform:rotate(180deg)}
.level-content{padding:16px;background:#fff;display:none}
.level-card.expanded .level-content{display:block}
.level-section{margin-bottom:14px}
.level-section h4{
  color:var(--indigo-500);margin-bottom:8px;font-size:.9rem;text-transform:uppercase;letter-spacing:.04em
}
.level-section p{line-height:1.6;color:#111827}
.level-section ul{padding-left:18px;line-height:1.6}
.level-section li{margin:3px 0}
.cumulative-indicator{
  background:#e8f4fd;border-left:4px solid var(--indigo-500);padding:10px 14px;margin-bottom:12px;
  font-size:.92rem;color:var(--slate-700)
}

/* =========================================================
   Summary Panel
   ========================================================= */
.summary-panel{
  position:fixed;right:30px;bottom:30px;background:#fff;border:1px solid var(--indigo-500);
  border-radius:10px;padding:16px;max-width:400px;box-shadow:0 10px 30px rgba(0,0,0,.2);
  z-index:100;transition:all .2s ease;box-sizing:border-box;
}
.summary-panel.minimized{
  padding:10px 14px;min-width:260px;max-width:360px;
  right:16px;bottom:16px;
}
.summary-panel.minimized .summary-content{display:none}
.summary-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
.summary-panel h3{color:var(--brand-deep);font-size:1.05rem;margin:0}
.summary-panel.minimized .summary-header h3{
  white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-weight:700;
}

/* Panel controls with SVG icons */
.panel-controls{display:flex;gap:8px}
.panel-btn{
  background:none;border:none;color:var(--indigo-500);cursor:pointer;
  padding:0;width:28px;height:28px;
  display:inline-flex;align-items:center;justify-content:center;
  transition:transform .15s ease,color .15s ease
}
.panel-btn:hover{transform:scale(1.15);color:var(--violet-500)}
.panel-btn svg{
  display:block;
  width:18px;
  height:18px;
  pointer-events:none;
}

/* Icon visibility states */
.panel-btn .icon-minimize,
.panel-btn .icon-maximize,
.panel-btn .icon-restore,
.panel-btn .icon-restore-max {
  transition: opacity .15s ease;
}

.summary-content{transition:all .2s ease}
.summary-scores{
  display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-bottom:12px
}
.summary-score-item{text-align:center;padding:8px;background:var(--slate-50);border-radius:8px}
.summary-score-item .score-label{font-size:.72rem;color:var(--slate-500)}
.summary-score-item .score-value{font-size:1.15rem;font-weight:700;color:var(--indigo-500)}
.venture-description{
  background:var(--slate-50);border-radius:8px;padding:12px;max-height:380px;overflow:auto
}
.panel-overlay{
  position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:99;display:none
}
.panel-overlay.active{display:block}

/* Maximized */
.summary-panel.maximized{
  top:50%;left:50%;transform:translate(-50%,-50%);right:auto;bottom:auto;
  width:90vw;max-width:1200px;height:85vh;max-height:820px;
  z-index:1000;display:flex;flex-direction:column
}
.summary-panel.maximized .summary-content{flex:1;display:flex;flex-direction:column;overflow:hidden}
.summary-panel.maximized .summary-scores{grid-template-columns:repeat(5,1fr);margin-bottom:16px}
.summary-panel.maximized .venture-description{flex:1;max-height:none;overflow:auto}

/* =========================================================
   VDR Builder (card grid + output)
   ========================================================= */
.subheader{margin:8px 16px 12px}
.subheader h2{margin:0 0 6px;color:var(--brand-deep)}
.subheader .subtext{color:var(--slate-600);font-size:14px;margin:0}

.card{
  background:#fff;border:1px solid var(--slate-200);border-radius:var(--radius);
  padding:16px;margin:12px 16px
}

/* Category goal cards */
.vdr-card-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(360px,1fr));
  gap:12px
}
.vdr-card{
  border:1px solid var(--slate-200);border-radius:10px;padding:12px;background:#fff;
  display:flex;flex-direction:column;gap:8px
}
.vdr-card .row{display:flex;align-items:center;justify-content:space-between;gap:8px}
.vdr-card .title{font-weight:800;color:var(--slate-900)}
.vdr-card .link{font-weight:600;font-size:12px;color:var(--indigo-600);text-decoration:underline;cursor:pointer}
.vdr-card .badge{background:var(--slate-50)}
.vdr-card label{display:block;font-size:12px;color:var(--slate-500);margin-bottom:4px}
.vdr-card select{
  width:100%;height:36px;border:1px solid var(--slate-300);border-radius:8px;background:#fff;padding:4px 8px
}

.vdr-actions{display:flex;justify-content:flex-end;gap:10px;margin-top:12px}

.vdr-output-header{
  display:flex;justify-content:space-between;align-items:flex-start;gap:10px;margin-bottom:8px
}
.vdr-meta{font-size:13px;color:var(--slate-600)}
.vdr-meta .sep{margin:0 6px;color:var(--slate-300)}
#vdr-body .cat-section{margin-top:14px}
#vdr-body .cat-section h4{margin:0 0 6px}
#vdr-body ul{margin:6px 0 0 18px;padding:0}
#vdr-body li{margin:2px 0}

/* =========================================================
   Modal (View Levels)
   ========================================================= */
.modal{position:fixed;inset:0;z-index:1100;display:block}
.modal.hidden{display:none}
.modal .modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.5)}
.modal .modal-content{
  position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
  width:min(900px,92vw);max-height:min(85vh,900px);overflow:hidden;background:#fff;border-radius:14px;
  box-shadow:0 20px 60px rgba(0,0,0,.35);display:flex;flex-direction:column
}
.modal-header{
  display:flex;justify-content:space-between;align-items:center;gap:10px;
  padding:12px 14px;border-bottom:1px solid var(--slate-200)
}
.modal-header h3{margin:0;color:var(--brand-deep)}
.icon-btn{
  background:none;border:none;font-size:22px;line-height:1;cursor:pointer;color:var(--slate-700)
}
.modal-subheader{
  display:flex;align-items:center;gap:12px;padding:10px 14px;border-bottom:1px solid var(--slate-200);
  background:var(--slate-50)
}
.goal-chooser label{display:block;font-size:12px;color:var(--slate-500);margin-bottom:2px}
.goal-chooser select{
  height:34px;border:1px solid var(--slate-300);border-radius:8px;background:#fff;padding:4px 8px
}
.modal-body{padding:12px 14px;overflow:auto}
.modal-footer{
  display:flex;justify-content:flex-end;gap:8px;padding:10px 14px;border-top:1px solid var(--slate-200);background:#fff
}

/* Level reference blocks inside modal */
.level-ref{border:1px solid var(--slate-200);border-radius:10px;padding:10px;margin-bottom:10px}
.level-ref .lvl-title{font-weight:700;margin:0 0 6px}
.level-ref .lvl-def{margin:0 0 6px;color:var(--slate-700)}
.level-ref .lvl-deliv{margin:0;padding-left:18px}
.level-ref .lvl-deliv li{margin:2px 0}
.level-ref.path{border-color:var(--brand-indigo);box-shadow:0 0 0 2px rgba(87,82,208,.12)}

/* =========================================================
   Next category toast
   ========================================================= */
.next-toast{
  position:fixed;
  left:50%;
  bottom:24px;
  z-index:1200;
  backdrop-filter:blur(8px);
  background:rgba(255,255,255,.85);
  border:1px solid var(--slate-200);
  border-radius:999px;
  padding:6px;
  box-shadow:0 10px 32px rgba(0,0,0,.18);
  opacity:0;
  pointer-events:none;
  transform:translate(-50%, 10px);
  transition:opacity .22s ease, transform .22s ease;
}
.next-toast.show{
  opacity:1;
  pointer-events:auto;
  transform:translate(-50%, 0);
}
.next-toast .next-btn{
  background:var(--brand-indigo);
  border-color:transparent;
  border-radius:999px;
  padding:10px 16px;
  font-weight:700;
}
.next-toast .next-btn:hover{background:var(--brand-violet)}

/* =========================================================
   Responsive
   ========================================================= */
@media (max-width:1200px){
  .main-content{flex-direction:column}
  .sidebar{
    width:100%;border-right:none;border-bottom:1px solid var(--slate-200);
    position:static;max-height:none;
  }
  .category-list{display:flex;flex-wrap:wrap;gap:10px}
  .category-item{flex:1;min-width:160px}
  .summary-panel{position:static;margin:16px;max-width:100%}
}
@media (max-width:720px){
  body{padding:20px 10px}
  .toolbar{grid-template-columns:1fr;align-items:stretch}
  .topbar{margin:12px 12px 10px}
}